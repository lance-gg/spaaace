{"version":3,"sources":["../src/main.js"],"names":["PORT","process","env","INDEX","path","join","__dirname","server","requestHandler","listen","console","log","io","gameEngine","SpaaaceGameEngine","traceLevel","Lib","Trace","TRACE_NONE","serverEngine","SpaaaceServerEngine","debug","updateRate","timeoutInterval","start","use","req","res","next","express","get","sendFile"],"mappings":";;AAAA;;AACA;;AACA;;AAGA;;AAEA;;AACA;;AACA;;;;;;;;AAEA,IAAMA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;;AACA,IAAMG,KAAK,GAAGC,iBAAKC,IAAL,CAAUC,SAAV,EAAqB,oBAArB,CAAd,C,CAEA;;;AACA,IAAMC,MAAM,GAAG,0BAAf;AACA,IAAIC,cAAc,GAAGD,MAAM,CAACE,MAAP,CAAcT,IAAd,EAAoB;AAAA,SAAMU,OAAO,CAACC,GAAR,wBAA4BX,IAA5B,EAAN;AAAA,CAApB,CAArB;AACA,IAAMY,EAAE,GAAG,wBAASJ,cAAT,CAAX,C,CACA;;AACA,IAAMK,UAAU,GAAG,IAAIC,6BAAJ,CAAsB;AAAEC,EAAAA,UAAU,EAAEC,aAAIC,KAAJ,CAAUC;AAAxB,CAAtB,CAAnB;AACA,IAAMC,YAAY,GAAG,IAAIC,+BAAJ,CAAwBR,EAAxB,EAA4BC,UAA5B,EAAwC;AAC3DQ,EAAAA,KAAK,EAAE,EADoD;AAE3DC,EAAAA,UAAU,EAAE,CAF+C;AAG3DC,EAAAA,eAAe,EAAE,CAH0C,CAGvC;;AAHuC,CAAxC,CAArB;AAKAJ,YAAY,CAACK,KAAb;AAEAjB,MAAM,CAACkB,GAAP,CAAW,GAAX;AAAA,qEAAgB,iBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;AAAA;AAAA;AAAA;AACd;AACA;AACAA,YAAAA,IAAI,GAHU,CAId;;AAJc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAAA;AAAA;AAAA;AAAA;AAMArB,MAAM,CAACkB,GAAP,CAAW,GAAX,EAAgBI,8BAAezB,iBAAKC,IAAL,CAAUC,SAAV,EAAqB,UAArB,CAAf,CAAhB;AAEAC,MAAM,CAACuB,GAAP,CAAW,GAAX,EAAgB,UAAUJ,GAAV,EAAeC,GAAf,EAAoB;AAClCA,EAAAA,GAAG,CAACI,QAAJ,CAAa5B,KAAb;AACD,CAFD,E,CAIA;AACA;AACA;AACA;AACA","sourcesContent":["import express from \"express\";\nimport socketIO from \"socket.io\";\nimport path from \"path\";\n// const url = require(\"url\");\n// const querystring = require(\"querystring\");\nimport { Lib } from \"lance-gg\";\n// Game Server\nimport SpaaaceServerEngine from \"./server/SpaaaceServerEngine.js\";\nimport SpaaaceGameEngine from \"./common/SpaaaceGameEngine.js\";\nimport { getRoomAndUsername } from \"./server/RoomManager.js\";\n\nconst PORT = process.env.PORT || 3000;\nconst INDEX = path.join(__dirname, \"../dist/index.html\");\n\n// define routes and socket\nconst server = express();\nlet requestHandler = server.listen(PORT, () => console.log(`Listening on ${PORT}`));\nconst io = socketIO(requestHandler);\n// Game Instances\nconst gameEngine = new SpaaaceGameEngine({ traceLevel: Lib.Trace.TRACE_NONE });\nconst serverEngine = new SpaaaceServerEngine(io, gameEngine, {\n  debug: {},\n  updateRate: 6,\n  timeoutInterval: 0, // no timeout\n});\nserverEngine.start();\n\nserver.use(\"/\", async (req, res, next) => {\n  // Redirects to Topia if visitor not in the world\n  //   const name = await getRoomAndUsername(req.url, res);\n  next();\n  //   res.redirect(\"https://topia.io\");\n});\nserver.use(\"/\", express.static(path.join(__dirname, \"../dist/\")));\n\nserver.get(\"/\", function (req, res) {\n  res.sendFile(INDEX);\n});\n\n// server.get(\"/api/getroom\", function (req, res) {\n//   //   const id = req;\n//   //   console.log(\"Server Asset ID\", id);\n//   //   res.send(id);\n// });\n"],"file":"main.js"}